<!DOCTYPE html>
<html>

<head lang="en">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="js/laypage.js" type="text/javascript"></script>
    <script src="js/warn/warnQuery.js" type="text/javascript"></script>
	<script src="js/inputLimit.js" type="text/javascript"></script>
    <style type="text/css">
        #mapArea,
        #tab,
        #mapfrm {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
            font-family: "微软雅黑";
        }
        
        #menu {
            height: 100%;
            overflow-y: auto
        }
        
        td {
            font-size: 14px
        }
        
        h4 {
            margin: 0;
        }
        
        .mapDiv {
            width: 83%;
            float: right;
        }
        
        #controlMapArea {
            margin-top: 0px;
            width: 100%;
            height: 100%;
            float: right;
            overflow: hidden;
            font-family: "微软雅黑";
        }
    </style>

</head>

<body>
    <div class="RTUContent">
        <div class="leftTreeCont">
            <div class="leftTree" id="leftTree">
            </div>
        </div>
        <div class="mapDiv" style="height:680px;margin-top:20px;">
            <div id="controlMapArea">
                <iframe width="98.5%" height="100%" src="html/system/systemMap.html"></iframe>
            </div>
        </div>
        <div class="RTUPanelCon"></div>
        <div class="rightTable" style="display:none">
            <div class="RTUTable tableSet">
                <div class="tableSearch">
                    <span id="backToGis">回到GIS</span>
                    <span>开始时间</span>
                    <input id="startTime" style="cursor:default" class="laydate-icon" />
                    <span>截止时间</span>
                    <input id="endTime" style="cursor:default" class="laydate-icon" />
                    <span>处理状态</span>
                    <select style="width:80px;" id="status">
                        <option value="">-全部-</option>
                        <option value=true>已处理</option>
                        <option value=false>未处理</option>
                    </select>
                    <span id="checkAlarm" style="cursor:pointer" class="spanbutton">查询</span>
                    <span class="spanbutton warnemail">邮件处理</span>
                    <span class="spanbutton warnphone">短信处理</span>
                </div>
                <table class="table table-bordered warningQueryTableDetail tableDetail" style="cursor:default" id="warningQueryTableDetail">
                    <thead>
                        <tr>
                            <th width="4%">序号</th>
                            <th width="6%">告警标识</th>
                            <th width="8%">告警类型</th>
                            <th width="8%">告警来源</th>
                            <th width="10%">所属光路</th>
                            <th width="8%">告警级别</th>
                            <th width="10%">告警位置</th>
                            <th width="12%">告警时间</th>
                            <th width="6%">处理状态</th>
                            <th width="6%">处理用户</th>
                            <th width="12%">处理时间</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <div id='pagination' style="display:none;text-align:center">
             	     第<span id="currentPage">1</span>页|
        		     共<span id="totalPage">1</span>页
        		  <span style="margin-left:10px">第</span><input style="width:40px;height:20px ;" id="pointPage" min="1" type="number">页 
        		  <a href="javascript:gotoPointPage()" style="margin-left:10px">跳转</a>
        		  <a href="javascript:gotoPrePage()" style="margin-left:10px">上一页</a> 
        		  <a href="javascript:gotoNextPage()" style="margin-left:10px">下一页</a>
        		  <a href="javascript:gotoFirstPage()" style="margin-left:10px"> 首页</a>
        		  <a href="javascript:gotoLastPage()" style="margin-left:10px"> 尾页</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        /**检查session**/
        checkSession();
        $(".warnemail").click(function() {
            var alarmId="";
            var trs = document.querySelectorAll("#warningQueryTableDetail tbody tr");
            for (var i=0;i<trs.length;i++){
	       	     if($(trs[i]).hasClass("currtr")){
	       	    	 alarmId= trs[i].children[1].innerHTML;
	       	    	 i=trs.length;
	       	      }
       	     }
       	    if(alarmId==""){//未选择cable
       	    	var txt="请先选择您要处理的告警条目。";
				var option={
    	   					title: "提示",
    	   					btn: parseInt("0001",2),
    	   					onOk: function(){//点击确认的执行方法
    	   						
    	  			       }
    	   				}
    	   		  window.wxc.xcConfirm(txt, "info", option);
       		   }
       	    else{
       			  $(".sidebarDiv").load("html/warn/warnemail.html");
    		        
       		   }
          
        });
        $(".warnphone").click(function() {
            var alarmId="";
            var trs = document.querySelectorAll("#warningQueryTableDetail tbody tr");
            for (var i=0;i<trs.length;i++){
	       	     if($(trs[i]).hasClass("currtr")){
	       	    	 alarmId= trs[i].children[1].innerHTML;
	       	    	 i=trs.length;
	       	      }
       	     }
       	    if(alarmId==""){//未选择cable
       		   var txt="请先选择您要处理的告警条目。";
				var option={
    	   					title: "提示",
    	   					btn: parseInt("0001",2),
    	   					onOk: function(){//点击确认的执行方法
    	   						
    	  			       }
    	   				}
    	   		  window.wxc.xcConfirm(txt, "info", option);
       		}
       	    else{
       	          $(".sidebarDiv").load("html/warn/warnphone.html");
    		   }
           
        });
       
    </script>
</body>

</html>